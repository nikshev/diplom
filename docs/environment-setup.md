# Налаштування середовищ розробки

Цей документ описує систему налаштування середовищ розробки для інформаційної системи управління бізнес-діяльністю підприємства.

## Структура середовищ

Проект підтримує три середовища розробки:

1. **Development** - локальне середовище для розробки
2. **Testing** - середовище для тестування
3. **Production** - виробниче середовище

Конфігурації для кожного середовища зберігаються в окремих директоріях:

```
/config
  /env-templates         # Шаблони конфігурацій
  /environments
    /development         # Конфігурації для розробки
    /testing             # Конфігурації для тестування
    /production          # Конфігурації для виробництва
```

## Файли конфігурації

Кожен мікросервіс має свій файл конфігурації середовища:

- `api-gateway.env` - Конфігурація для API Gateway
- `auth-service.env` - Конфігурація для сервісу автентифікації
- `order-service.env` - Конфігурація для сервісу замовлень
- `crm-service.env` - Конфігурація для CRM сервісу
- `inventory-service.env` - Конфігурація для сервісу управління товарами
- `finance-service.env` - Конфігурація для фінансового сервісу
- `analytics-service.env` - Конфігурація для аналітичного сервісу
- `frontend.env` - Конфігурація для фронтенд додатку

## Налаштування середовища

### Налаштування файлів .env

Для налаштування файлів `.env` в директоріях мікросервісів використовуйте скрипт `setup-env.sh`:

```bash
# Налаштування середовища розробки (за замовчуванням)
./config/setup-env.sh development

# Налаштування тестового середовища
./config/setup-env.sh testing

# Налаштування виробничого середовища
./config/setup-env.sh production
```

Скрипт створить файли `.env` в кожній директорії мікросервісу на основі конфігурацій вибраного середовища.

### Переключення між середовищами в Docker Compose

Для переключення між середовищами в файлі `docker-compose.yml` використовуйте скрипт `switch-env.sh`:

```bash
# Переключення на середовище розробки (за замовчуванням)
./config/switch-env.sh development

# Переключення на тестове середовище
./config/switch-env.sh testing

# Переключення на виробниче середовище
./config/switch-env.sh production
```

Скрипт оновить шляхи до файлів конфігурації в `docker-compose.yml` для використання вибраного середовища.

## Docker Compose

Файл `docker-compose.yml` налаштований для використання файлів конфігурації середовища з директорії `config/environments/development/`. Це дозволяє запускати всі сервіси з правильними налаштуваннями без необхідності копіювати файли `.env` вручну.

```bash
# Запуск усіх сервісів з конфігурацією середовища розробки
docker-compose up
```

## Створення власних конфігурацій

Для створення власної конфігурації:

1. Скопіюйте шаблон з директорії `config/env-templates/`
2. Створіть новий файл в директорії відповідного середовища
3. Відредагуйте значення змінних середовища

Наприклад:

```bash
cp config/env-templates/api-gateway.env config/environments/development/api-gateway.custom.env
```

## Змінні середовища

### Загальні змінні

- `NODE_ENV` - Середовище Node.js (development, testing, production)
- `PORT` - Порт, на якому запускається сервіс
- `LOG_LEVEL` - Рівень логування (debug, info, warn, error)
- `CORS_ORIGIN` - Дозволені джерела для CORS

### Змінні бази даних

- `DB_HOST` - Хост бази даних
- `DB_PORT` - Порт бази даних
- `DB_USER` - Користувач бази даних
- `DB_PASSWORD` - Пароль бази даних
- `DB_NAME` - Назва бази даних

### Змінні JWT

- `JWT_SECRET` - Секретний ключ для JWT
- `JWT_EXPIRATION` - Час життя JWT токена

### Змінні комунікації між сервісами

- `AUTH_SERVICE_URL` - URL сервісу автентифікації
- `ORDER_SERVICE_URL` - URL сервісу замовлень
- `CRM_SERVICE_URL` - URL CRM сервісу
- `INVENTORY_SERVICE_URL` - URL сервісу управління товарами
- `FINANCE_SERVICE_URL` - URL фінансового сервісу
- `ANALYTICS_SERVICE_URL` - URL аналітичного сервісу

## Безпека

Для виробничого середовища:

1. **Ніколи не зберігайте реальні паролі та секретні ключі в репозиторії**
2. Використовуйте змінні середовища або зовнішні системи управління секретами
3. Для CI/CD використовуйте секрети GitHub Actions або аналогічні механізми

## Рекомендації

1. Завжди використовуйте різні паролі для різних середовищ
2. Регулярно змінюйте секретні ключі
3. Обмежуйте доступ до конфігурацій виробничого середовища
4. Використовуйте шифрування для зберігання чутливих даних
