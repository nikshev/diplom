# API Documentation

## Огляд

Ця документація описує API для інформаційної системи управління бізнес-діяльністю підприємства. Система побудована на мікросервісній архітектурі, де кожен сервіс надає свій власний API, а API Gateway забезпечує єдину точку входу для клієнтських додатків.

## Архітектура API

Система використовує RESTful API з наступними характеристиками:
- Використання HTTP методів (GET, POST, PUT, DELETE) для операцій CRUD
- Формат даних: JSON
- Автентифікація: JWT (JSON Web Tokens)
- Версіонування API через URI шлях (наприклад, `/api/v1/resource`)
- Пагінація для колекцій ресурсів
- Фільтрація та сортування через параметри запиту

## Базовий URL

```
https://api.example.com/api/v1
```

## Сервіси

Система складається з наступних сервісів, кожен з яких надає свій API:

1. **Auth Service** - управління користувачами, ролями та автентифікацією
2. **Order Service** - управління замовленнями
3. **Customer Service** - управління клієнтами
4. **Product Service** - управління товарами та категоріями
5. **Inventory Service** - управління товарними запасами
6. **Finance Service** - управління фінансами та платежами
7. **Analytics Service** - аналітика та звітність
8. **Integration Service** - інтеграція з зовнішніми сервісами (Nova Poshta, Rozetka, банківські API)

## Автентифікація

Всі запити до API (крім публічних ендпоінтів) повинні містити JWT токен у заголовку `Authorization`:

```
Authorization: Bearer <token>
```

Токен можна отримати через ендпоінт `/auth/login`.

## Формат відповіді

### Успішна відповідь

```json
{
  "success": true,
  "data": {
    // Дані відповіді
  },
  "meta": {
    // Метадані (пагінація, тощо)
  }
}
```

### Відповідь з помилкою

```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "Опис помилки",
    "details": {
      // Додаткові деталі помилки
    }
  }
}
```

## Коди помилок

| Код помилки | HTTP статус | Опис |
|-------------|-------------|------|
| AUTH_REQUIRED | 401 | Необхідна автентифікація |
| INVALID_TOKEN | 401 | Недійсний токен |
| TOKEN_EXPIRED | 401 | Термін дії токену закінчився |
| ACCESS_DENIED | 403 | Доступ заборонено |
| RESOURCE_NOT_FOUND | 404 | Ресурс не знайдено |
| VALIDATION_ERROR | 422 | Помилка валідації даних |
| INTERNAL_ERROR | 500 | Внутрішня помилка сервера |

## Пагінація

Для колекцій ресурсів використовується пагінація. Параметри пагінації передаються через параметри запиту:

```
GET /api/v1/resource?page=1&limit=10
```

Відповідь містить метадані пагінації:

```json
{
  "success": true,
  "data": [...],
  "meta": {
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 100,
      "pages": 10
    }
  }
}
```

## Фільтрація та сортування

Фільтрація та сортування здійснюються через параметри запиту:

```
GET /api/v1/resource?filter[field]=value&sort=field,-another_field
```

Префікс `-` перед полем означає сортування за спаданням.

## Включення пов'язаних ресурсів

Для включення пов'язаних ресурсів використовується параметр `include`:

```
GET /api/v1/resource?include=related_resource,another_related_resource
```

## Документація по сервісах

Детальна документація по кожному сервісу доступна за наступними посиланнями:

- [Auth Service API](./auth-service.md)
- [Order Service API](./order-service.md)
- [Customer Service API](./customer-service.md)
- [Product Service API](./product-service.md)
- [Inventory Service API](./inventory-service.md)
- [Finance Service API](./finance-service.md)
- [Analytics Service API](./analytics-service.md)
- [Integration Service API](./integration-service.md)

## Приклади використання

Приклади використання API доступні в каталозі [examples](./examples/).

## Зміни в API

Історія змін API доступна в [CHANGELOG.md](./CHANGELOG.md).

## Обмеження

- Максимальний розмір запиту: 10 MB
- Максимальна кількість запитів: 1000 запитів на хвилину для одного IP
- Максимальна кількість елементів у відповіді: 100 (параметр `limit` не може перевищувати 100)

## Підтримка

Якщо у вас виникли питання або проблеми з API, зверніться до служби підтримки:
- Email: support@example.com
- Телефон: +380 (44) 123-45-67
